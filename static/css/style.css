:root{
  --label-gap:6mm;
  --page-width:210mm;
  --page-height:297mm;
  --margin-top:10mm;
  --margin-right:10mm;
  --margin-bottom:10mm;
  --margin-left:10mm;
  --label-padding:2mm;
  --label-font-size:12pt;
  --label-font-family: system-ui,Segoe UI,Arial,sans-serif;
}
body{font-family:system-ui,Segoe UI,Arial,sans-serif;padding:16px;color:#222;background:#f7f7f7}
.app{max-width:1100px;margin:0 auto;background:#fff;padding:16px;border-radius:6px;box-shadow:0 2px 8px rgba(0,0,0,0.06)}
header h1{margin:0}
.controls{display:flex;gap:16px;flex-wrap:wrap;margin:12px 0}
.controls label, .add-label, .actions{display:flex;align-items:center;gap:8px}
.add-label input[type=file]{width:180px}
.label-list{min-width:220px}
.label-list ul{list-style:none;padding:0;margin:4px 0}
.label-item{display:flex;gap:8px;align-items:center;padding:6px 0}
.thumb{width:36px;height:36px;object-fit:cover;border-radius:4px;margin-right:6px}
.sheet{border:1px dashed #ccc;padding:8px;margin-top:12px;display:grid;gap:var(--label-gap);background:#fff}
.page{display:flex;justify-content:center;margin-top:12px}
.page .sheet{
  width:var(--page-width);
  height:var(--page-height);
  padding:var(--margin-top) var(--margin-right) var(--margin-bottom) var(--margin-left);
  box-sizing:border-box;
  display:grid;
  gap:var(--label-gap);
  background: #fff;
  border:1px solid rgba(0,0,0,0.06);
}
.label{border:1px solid #ddd;padding:var(--label-padding);box-sizing:border-box;display:flex;flex-direction:column;align-items:center;justify-content:center}
.label-img{max-width:100%;max-height:60%;object-fit:contain}
.label-text{margin-top:6px;font-weight:600;font-size:var(--label-font-size);font-family:var(--label-font-family)}
.actions button{padding:8px 12px}
.crossmark{pointer-events:none}

/* spacing between image and text when laid out in row */
.label.row .label-img{margin-right:6px}
.label.row .label-text{margin-left:6px}

/* Modal styles */
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.45);z-index:1000}
.modal[aria-hidden="false"]{display:flex}
.modal-content{background:#fff;padding:12px;border-radius:6px;min-width:320px;max-width:720px;box-shadow:0 6px 24px rgba(0,0,0,0.2)}
.modal-content header h3{margin:0 0 8px 0}
.modal-body{display:flex;flex-direction:column;gap:8px}
.modal-body label{display:flex;flex-direction:column;gap:6px}
.modal-images{display:flex;flex-wrap:wrap;gap:8px;padding:6px;border:1px dashed #ddd;border-radius:4px}
.modal-images .mimg{position:relative}
.modal-images img{width:72px;height:72px;object-fit:cover;border-radius:3px}
.mimg button{position:absolute;top:2px;right:2px;background:rgba(255,255,255,0.9);border:1px solid #ccc;padding:2px 4px;font-size:12px}
.modal-content footer{display:flex;gap:8px;justify-content:flex-end;margin-top:8px}

/* modal preview for manual positioning */
.modal-preview{background:#fafafa;margin:6px 0;position:relative;overflow:auto;max-width:100%;max-height:60vh;padding:6px}
.modal-preview-inner{position:relative;box-sizing:border-box;background:#fff;padding:0;display:block;margin:auto;overflow:visible}
.modal-preview .preview-item{position:absolute;cursor:grab;touch-action:none}
.modal-preview .preview-item:active{cursor:grabbing}
.modal-preview .preview-text{position:absolute;cursor:grab;user-select:none;padding:2px 4px;text-align:center}
/* Ensure modal preview uses same image/text sizing as the real labels */
.modal-preview .label-img{max-width:100%;max-height:60%;object-fit:contain}
.modal-preview .label-text{font-weight:600;font-size:var(--label-font-size);text-align:center;font-family:var(--label-font-family)}

@media print{
  html,body{margin:0;padding:0;background:#fff}
  /* hide UI chrome but keep the page wrapper */
  .controls, header, .label-list, .actions{display:none !important}

  /* keep the sheet sized to the page with its margins so label sizes match exactly */
  .page{display:block;margin:0}
  .page .sheet{
    width:var(--page-width) !important;
    height:var(--page-height) !important;
    padding:var(--margin-top) var(--margin-right) var(--margin-bottom) var(--margin-left) !important;
    box-sizing:border-box;
    border:none;
    box-shadow:none;
    gap:0;
  }
    /* default: no printed borders unless a data attribute requests one */
    html:not([data-border-style]) .label,
    html[data-border-style="none"] .label {
      border:none !important;
      outline:none !important;
      box-shadow:none !important;
      margin:0 !important;
      page-break-inside:avoid;
    }

    html[data-border-style="dotted"] .label {
      border:0.45mm dotted #000 !important;
      outline:none !important;
      box-shadow:none !important;
      margin:0 !important;
      page-break-inside:avoid;
    }

    html[data-border-style="dashed"] .label {
      border:0.45mm dashed #000 !important;
      outline:none !important;
      box-shadow:none !important;
      margin:0 !important;
      page-break-inside:avoid;
    }

    html[data-border-style="solid"] .label {
      border:0.45mm solid #000 !important;
      outline:none !important;
      box-shadow:none !important;
      margin:0 !important;
      page-break-inside:avoid;
    }

    html[data-border-style="crossmarks"] .label {
      border:none !important;
      position:relative !important;
      box-shadow:none !important;
      margin:0 !important;
      page-break-inside:avoid;
    }

  /* ensure the page wrapper doesn't break across pages and remove overflow */
  .page{page-break-after:avoid;page-break-inside:avoid}
  html,body{overflow:visible}

  /* remove preview heading from print but keep label text visible */
  main > h2 { display: none !important; }
}
